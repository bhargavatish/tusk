<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>myObj Local</title>
    
</head>

<body>
    <form id="formdata">
        <input type="text" name="name" id="values" placeholder="Enter name..."  required>
        <input type="email" name="mainid" id="mail_id" placeholder="example@email.com" required>
        <input type="number" name="phone" id="phone_id"  value="9876543210" required>
        <input type="submit" value="submit">
    </form>
    <div>

        <ul id="list"></ul>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
    <script>
        var form=document.querySelector('#formdata');
        form.addEventListener('submit',present);
        // document.get

        function present(e){
            e.preventDefault();
            var li = document.createElement('li');

            let nameText=document.querySelector('#formdata #values').value;
            var name=document.createTextNode(nameText);
            li.appendChild(name);

            var emailText=document.querySelector('#formdata #mail_id').value;
            var email=document.createTextNode(emailText);
            li.appendChild(email);

            var phoneText=document.querySelector('#formdata #phone_id').value;
            var phone=document.createTextNode(phoneText);
            li.appendChild(phone);

            var input = document.createElement('input');
            input.type='button';  input.value='Delete';
            // input.onclick=deleteLi;
            li.appendChild(input)

            
            
            document.querySelector('#list').appendChild(li);
            
            input.onclick=function(e){
                var button= e.target;
                document.querySelector('#list').removeChild(button.parentElement);
                localStorage.removeItem(nameText);
            };
            
            var edit=document.createElement('input'); edit.type='button';
            edit.value='Edit';   
            li.appendChild(edit);

            edit.onclick=function(e){
                localStorage.removeItem(nameText);
                document.getElementById('list').removeChild(e.target.parentElement);
                document.querySelector('#values').value=nameText;
                document.querySelector('#mail_ed').value=emailText;
                document.querySelector('#phone_id').value=phoneText;
                
            };

            var Obj={
                name : nameText,
                email: emailText,
                phone: phoneText
            };
            
            // var str= JSON.stringify(Obj);
            // localStorage.setItem(nameText,str);
            // console.log(Obj.name);
            axios.post("https://crudcrud.com/api/b089cc275bf24c539c6b0ebfe02525fe/appointmentsdata",Obj)
            .then((res) => console.log(res))
            .catch((err) => console.log(err));


        }
            

            
    </script>

</body>
</html>
